<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåø Living Seed Ecosystem - Auto-Growing Community Platform</title>
    <style>
        :root {
            --soil-brown: #5D4037;
            --growth-green: #4CAF50;
            --sun-gold: #FFB300;
            --water-blue: #1976D2;
            --root-purple: #7B1FA2;
            --mycelium-white: #F5F5F5;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #1B5E20 0%, #2E7D32 100%);
            color: var(--mycelium-white);
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .ecosystem-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* LIVING HEADER WITH REAL-TIME COUNTERS */
        .living-header {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 40px;
            border: 2px solid var(--sun-gold);
            position: relative;
            overflow: hidden;
        }
        
        .header-title {
            font-size: 3.5em;
            text-align: center;
            margin-bottom: 20px;
            background: linear-gradient(45deg, var(--sun-gold), var(--growth-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .real-time-counters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .counter-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s;
        }
        
        .counter-card:hover {
            transform: translateY(-5px);
            border-color: var(--sun-gold);
            box-shadow: 0 10px 30px rgba(255, 179, 0, 0.3);
        }
        
        .counter-number {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--sun-gold);
            font-family: 'Courier New', monospace;
        }
        
        .counter-label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        /* INTERACTIVE ECOSYSTEM VISUALIZATION */
        .ecosystem-viz {
            height: 500px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            margin: 40px 0;
            position: relative;
            overflow: hidden;
            border: 2px solid var(--root-purple);
        }
        
        .ecosystem-node {
            position: absolute;
            width: 60px;
            height: 60px;
            background: var(--growth-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.5s;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
            z-index: 2;
        }
        
        .ecosystem-node:hover {
            transform: scale(1.2);
            background: var(--sun-gold);
        }
        
        .connection-line {
            position: absolute;
            background: rgba(255, 255, 255, 0.3);
            height: 2px;
            transform-origin: 0 0;
            z-index: 1;
        }
        
        /* COMMUNITY HUB GRID */
        .hub-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 40px 0;
        }
        
        .hub-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .hub-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--growth-green), var(--water-blue));
        }
        
        .hub-card:hover {
            transform: translateY(-8px);
            border-color: var(--sun-gold);
            box-shadow: 0 15px 35px rgba(255, 179, 0, 0.2);
        }
        
        .hub-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }
        
        .hub-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        /* GROWTH ACTIONS */
        .growth-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }
        
        .action-btn {
            background: linear-gradient(135deg, var(--soil-brown), var(--root-purple));
            color: white;
            border: none;
            padding: 20px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(123, 31, 162, 0.4);
        }
        
        /* AUTO-UPDATING FEED */
        .ecosystem-feed {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 20px;
            padding: 30px;
            margin: 40px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-height: 400px;
            overflow-y: auto;
        }
        
        .feed-item {
            padding: 15px;
            margin: 10px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border-left: 4px solid var(--growth-green);
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* GOOGLE SHEETS INTEGRATION PANEL */
        .sheets-panel {
            background: rgba(255, 255, 255, 0.05);
            border: 2px dashed var(--water-blue);
            border-radius: 15px;
            padding: 25px;
            margin: 40px 0;
        }
        
        .sheets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .sheet-cell {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        /* REAL-TIME GROWTH ANIMATIONS */
        .growth-particle {
            position: fixed;
            width: 10px;
            height: 10px;
            background: var(--growth-green);
            border-radius: 50%;
            pointer-events: none;
            z-index: 1000;
        }
        
        /* RESPONSIVE */
        @media (max-width: 768px) {
            .header-title { font-size: 2.5em; }
            .ecosystem-viz { height: 300px; }
            .hub-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="ecosystem-container">
        <!-- LIVING HEADER WITH REAL-TIME DATA -->
        <div class="living-header">
            <h1 class="header-title">üåø LIVING SEED ECOSYSTEM</h1>
            <p style="text-align: center; opacity: 0.9;">Google Sheets-powered community that grows with every interaction</p>
            
            <div class="real-time-counters">
                <div class="counter-card">
                    <div class="counter-number" id="totalSeeds">8,427</div>
                    <div class="counter-label">Seeds Planted</div>
                </div>
                <div class="counter-card">
                    <div class="counter-number" id="activeTribes">14</div>
                    <div class="counter-label">Active Tribes</div>
                </div>
                <div class="counter-card">
                    <div class="counter-number" id="ecosystemValue">$17.9B</div>
                    <div class="counter-label">Ecosystem Value</div>
                </div>
                <div class="counter-card">
                    <div class="counter-number" id="connectionsMade">2,843</div>
                    <div class="counter-label">Connections</div>
                </div>
            </div>
        </div>
        
        <!-- INTERACTIVE ECOSYSTEM VISUALIZATION -->
        <div class="ecosystem-viz" id="ecosystemViz">
            <!-- Dynamic nodes and connections will be generated here -->
        </div>
        
        <!-- COMMUNITY HUB GRID -->
        <div class="hub-grid" id="hubGrid">
            <!-- Dynamic hub cards will be generated here -->
        </div>
        
        <!-- GROWTH ACTIONS -->
        <div class="growth-actions">
            <button class="action-btn" onclick="plantSeed()">
                üå± Plant a Seed
            </button>
            <button class="action-btn" onclick="connectTribes()">
                üîó Connect Tribes
            </button>
            <button class="action-btn" onclick="shareKnowledge()">
                üìö Share Knowledge
            </button>
            <button class="action-btn" onclick="inviteBuilder()">
                üèóÔ∏è Invite Builder
            </button>
        </div>
        
        <!-- GOOGLE SHEETS INTEGRATION PANEL -->
        <div class="sheets-panel">
            <h3 style="color: var(--water-blue); margin-bottom: 20px;">üìä LIVE GOOGLE SHEETS INTEGRATION</h3>
            <div class="sheets-grid" id="sheetsGrid">
                <!-- Dynamic sheet data will appear here -->
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button onclick="syncWithSheets()" style="background: var(--growth-green); color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer;">
                    üîÑ Sync All Data to Google Sheets
                </button>
                <p style="margin-top: 10px; font-size: 0.9em; opacity: 0.8;">
                    Last sync: <span id="lastSyncTime">Just now</span> | 
                    Sheet: <a href="#" style="color: var(--sun-gold);" id="sheetsLink">Ecosystem_Master_Sheet</a>
                </p>
            </div>
        </div>
        
        <!-- AUTO-UPDATING FEED -->
        <div class="ecosystem-feed">
            <h3 style="color: var(--sun-gold); margin-bottom: 20px;">üîÑ ECOSYSTEM ACTIVITY FEED</h3>
            <div id="activityFeed">
                <!-- Dynamic activity feed will appear here -->
            </div>
        </div>
    </div>

    <!-- GOOGLE APPS SCRIPT INTEGRATION CODE -->
    <script>
        // =============================================
        // GOOGLE SHEETS INTEGRATION ENGINE
        // =============================================
        class GoogleSheetsEcosystem {
            constructor() {
                // Google Sheets configuration
                this.SHEET_ID = 'YOUR_GOOGLE_SHEET_ID'; // Replace with actual Sheet ID
                this.API_KEY = 'YOUR_GOOGLE_API_KEY';   // Replace with your API key
                this.SHEETS = {
                    MASTER: 'Ecosystem_Master',
                    SEEDS: 'Seed_Registry',
                    TRIBES: 'Tribe_Network',
                    ACTIVITY: 'Activity_Log',
                    CONNECTIONS: 'Connection_Web'
                };
                
                // Ecosystem state
                this.ecosystem = {
                    seeds: 8427,
                    tribes: 14,
                    connections: 2843,
                    value: 17900000000,
                    nodes: [],
                    edges: [],
                    activity: []
                };
                
                // Initialize
                this.initializeEcosystem();
                this.loadFromSheets();
                this.startEcosystemPulse();
            }
            
            // =============================================
            // CORE ECOSYSTEM METHODS
            // =============================================
            
            async loadFromSheets() {
                try {
                    // Load master data from Google Sheets
                    const response = await fetch(
                        `https://sheets.googleapis.com/v4/spreadsheets/${this.SHEET_ID}/values/Ecosystem_Master!A:Z?key=${this.API_KEY}`
                    );
                    
                    if (response.ok) {
                        const data = await response.json();
                        this.updateFromSheetData(data.values);
                        this.updateUI();
                    }
                } catch (error) {
                    console.log('Using local ecosystem data:', error.message);
                    // Fallback to local data
                    this.initializeLocalEcosystem();
                }
            }
            
            updateFromSheetData(sheetData) {
                if (!sheetData) return;
                
                // Parse Google Sheets data
                // Assuming structure:
                // Row 1: Headers
                // Row 2+: Ecosystem data
                if (sheetData.length > 1) {
                    const headers = sheetData[0];
                    const data = sheetData[1];
                    
                    this.ecosystem = {
                        seeds: parseInt(data[headers.indexOf('Total_Seeds')]) || 8427,
                        tribes: parseInt(data[headers.indexOf('Active_Tribes')]) || 14,
                        connections: parseInt(data[headers.indexOf('Connections')]) || 2843,
                        value: parseInt(data[headers.indexOf('Ecosystem_Value')]) || 17900000000,
                        nodes: JSON.parse(data[headers.indexOf('Nodes')] || '[]'),
                        edges: JSON.parse(data[headers.indexOf('Edges')] || '[]'),
                        activity: JSON.parse(data[headers.indexOf('Activity')] || '[]')
                    };
                }
            }
            
            async syncToSheets() {
                try {
                    const timestamp = new Date().toISOString();
                    
                    // Prepare data for Google Sheets
                    const values = [
                        ['Last_Sync', timestamp],
                        ['Total_Seeds', this.ecosystem.seeds],
                        ['Active_Tribes', this.ecosystem.tribes],
                        ['Connections', this.ecosystem.connections],
                        ['Ecosystem_Value', this.ecosystem.value],
                        ['Nodes', JSON.stringify(this.ecosystem.nodes)],
                        ['Edges', JSON.stringify(this.ecosystem.edges)],
                        ['Activity', JSON.stringify(this.ecosystem.activity.slice(-50))] // Last 50 activities
                    ];
                    
                    // Update Google Sheets (simplified for demo)
                    console.log('Syncing to Google Sheets:', values);
                    
                    // In production, you would use:
                    // await this.updateSheet('Ecosystem_Master', values);
                    
                    // Update UI
                    document.getElementById('lastSyncTime').textContent = 
                        new Date().toLocaleTimeString();
                    
                    this.createGrowthAnimation();
                    
                } catch (error) {
                    console.error('Sync error:', error);
                }
            }
            
            // =============================================
            // ECOSYSTEM INTERACTIONS
            // =============================================
            
            plantSeed() {
                const seedTypes = [
                    { type: 'Coffee', value: 100, tribe: 'Nomad' },
                    { type: 'Quinoa', value: 150, tribe: 'Prepper' },
                    { type: 'Cacao', value: 200, tribe: 'Healer' },
                    { type: 'Amaranth', value: 120, tribe: 'Builder' },
                    { type: 'Tobacco', value: 180, tribe: 'Wisdom Keeper' }
                ];
                
                const seed = seedTypes[Math.floor(Math.random() * seedTypes.length)];
                
                // Update ecosystem
                this.ecosystem.seeds++;
                this.ecosystem.value += seed.value;
                
                // Add activity
                const activity = {
                    type: 'seed_planted',
                    message: `${seed.type} seed planted in ${seed.tribe} territory`,
                    value: seed.value,
                    timestamp: new Date().toISOString()
                };
                
                this.ecosystem.activity.push(activity);
                this.addActivityToFeed(activity);
                
                // Add node to visualization
                this.addNode({
                    id: `seed_${Date.now()}`,
                    type: 'seed',
                    tribe: seed.tribe,
                    value: seed.value,
                    x: Math.random() * 80 + 10,
                    y: Math.random() * 80 + 10
                });
                
                // Sync to Google Sheets
                this.syncToSheets();
                this.updateUI();
                
                return seed;
            }
            
            connectTribes() {
                if (this.ecosystem.nodes.length < 2) return;
                
                // Randomly connect two nodes
                const node1 = this.ecosystem.nodes[Math.floor(Math.random() * this.ecosystem.nodes.length)];
                const node2 = this.ecosystem.nodes[Math.floor(Math.random() * this.ecosystem.nodes.length)];
                
                if (node1.id === node2.id) return;
                
                // Create connection
                const connection = {
                    id: `conn_${Date.now()}`,
                    from: node1.id,
                    to: node2.id,
                    strength: Math.random() * 0.5 + 0.5,
                    timestamp: new Date().toISOString()
                };
                
                this.ecosystem.connections++;
                this.ecosystem.edges.push(connection);
                
                // Ecosystem grows with connections
                this.ecosystem.value += Math.floor(connection.strength * 10000);
                
                // Add activity
                const activity = {
                    type: 'connection_made',
                    message: `${node1.tribe} connected with ${node2.tribe}`,
                    value: Math.floor(connection.strength * 10000),
                    timestamp: new Date().toISOString()
                };
                
                this.ecosystem.activity.push(activity);
                this.addActivityToFeed(activity);
                
                // Update visualization
                this.addConnectionToViz(connection, node1, node2);
                this.updateUI();
                
                // Sync to Google Sheets
                this.syncToSheets();
                
                return connection;
            }
            
            shareKnowledge() {
                const knowledgeTypes = [
                    { type: 'Healing Protocol', value: 5000, tribe: 'Healer' },
                    { type: 'Financial Blueprint', value: 7500, tribe: 'Builder' },
                    { type: 'Agricultural Wisdom', value: 3000, tribe: 'Prepper' },
                    { type: 'Digital Sovereignty', value: 10000, tribe: 'Nomad' },
                    { type: 'Ceremonial Knowledge', value: 6000, tribe: 'Wisdom Keeper' }
                ];
                
                const knowledge = knowledgeTypes[Math.floor(Math.random() * knowledgeTypes.length)];
                
                // Update ecosystem
                this.ecosystem.value += knowledge.value;
                
                // Add activity
                const activity = {
                    type: 'knowledge_shared',
                    message: `${knowledge.type} shared by ${knowledge.tribe}`,
                    value: knowledge.value,
                    timestamp: new Date().toISOString()
                };
                
                this.ecosystem.activity.push(activity);
                this.addActivityToFeed(activity);
                
                // Create knowledge node
                this.addNode({
                    id: `knowledge_${Date.now()}`,
                    type: 'knowledge',
                    tribe: knowledge.tribe,
                    value: knowledge.value,
                    x: Math.random() * 80 + 10,
                    y: Math.random() * 80 + 10
                });
                
                // Sync to Google Sheets
                this.syncToSheets();
                this.updateUI();
                
                return knowledge;
            }
            
            inviteBuilder() {
                const builderTypes = [
                    { type: 'Permaculturist', value: 25000, skills: ['food forest', 'water management'] },
                    { type: 'Digital Architect', value: 50000, skills: ['blockchain', 'decentralized apps'] },
                    { type: 'Community Weaver', value: 15000, skills: ['conflict resolution', 'tribal governance'] },
                    { type: 'Healing Facilitator', value: 30000, skills: ['plant medicine', 'trauma integration'] },
                    { type: 'Knowledge Keeper', value: 20000, skills: ['oral history', 'digital preservation'] }
                ];
                
                const builder = builderTypes[Math.floor(Math.random() * builderTypes.length)];
                
                // Update ecosystem
                this.ecosystem.tribes++;
                this.ecosystem.value += builder.value;
                
                // Add activity
                const activity = {
                    type: 'builder_joined',
                    message: `${builder.type} joined the ecosystem with skills: ${builder.skills.join(', ')}`,
                    value: builder.value,
                    timestamp: new Date().toISOString()
                };
                
                this.ecosystem.activity.push(activity);
                this.addActivityToFeed(activity);
                
                // Create builder node
                this.addNode({
                    id: `builder_${Date.now()}`,
                    type: 'builder',
                    tribe: builder.type,
                    value: builder.value,
                    skills: builder.skills,
                    x: Math.random() * 80 + 10,
                    y: Math.random() * 80 + 10
                });
                
                // Auto-connect builder to relevant nodes
                setTimeout(() => {
                    this.autoConnectBuilder(builder);
                }, 1000);
                
                // Sync to Google Sheets
                this.syncToSheets();
                this.updateUI();
                
                return builder;
            }
            
            // =============================================
            // VISUALIZATION METHODS
            // =============================================
            
            initializeEcosystem() {
                // Create initial nodes for tribes
                const initialTribes = [
                    { id: 'nomads', type: 'tribe', tribe: 'Digital Nomads', value: 5000000, x: 20, y: 20 },
                    { id: 'healers', type: 'tribe', tribe: 'Plant Medicine', value: 3000000, x: 80, y: 30 },
                    { id: 'builders', type: 'tribe', tribe: 'Parallel Economy', value: 7500000, x: 40, y: 70 },
                    { id: 'preppers', type: 'tribe', tribe: 'Resilience Community', value: 2000000, x: 60, y: 50 },
                    { id: 'wisdom', type: 'tribe', tribe: 'Knowledge Keepers', value: 4000000, x: 30, y: 80 }
                ];
                
                this.ecosystem.nodes = initialTribes;
                this.renderEcosystemViz();
                this.renderHubGrid();
                this.renderSheetsGrid();
            }
            
            renderEcosystemViz() {
                const container = document.getElementById('ecosystemViz');
                if (!container) return;
                
                container.innerHTML = '';
                
                // Render nodes
                this.ecosystem.nodes.forEach(node => {
                    const nodeEl = document.createElement('div');
                    nodeEl.className = 'ecosystem-node';
                    nodeEl.id = `node_${node.id}`;
                    nodeEl.style.left = `${node.x}%`;
                    nodeEl.style.top = `${node.y}%`;
                    nodeEl.style.background = this.getNodeColor(node.type);
                    nodeEl.innerHTML = this.getNodeIcon(node.type);
                    nodeEl.title = `${node.tribe}\nValue: $${node.value.toLocaleString()}`;
                    
                    nodeEl.addEventListener('click', () => this.showNodeDetails(node));
                    container.appendChild(nodeEl);
                });
                
                // Render edges
                this.ecosystem.edges.forEach(edge => {
                    const fromNode = this.ecosystem.nodes.find(n => n.id === edge.from);
                    const toNode = this.ecosystem.nodes.find(n => n.id === edge.to);
                    
                    if (fromNode && toNode) {
                        this.addConnectionToViz(edge, fromNode, toNode);
                    }
                });
            }
            
            addNode(node) {
                this.ecosystem.nodes.push(node);
                this.renderEcosystemViz();
            }
            
            addConnectionToViz(connection, fromNode, toNode) {
                const container = document.getElementById('ecosystemViz');
                if (!container) return;
                
                // Calculate line position and angle
                const x1 = fromNode.x;
                const y1 = fromNode.y;
                const x2 = toNode.x;
                const y2 = toNode.y;
                
                const length = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
                const angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI;
                
                const line = document.createElement('div');
                line.className = 'connection-line';
                line.style.width = `${length}%`;
                line.style.left = `${x1}%`;
                line.style.top = `${y1}%`;
                line.style.transform = `rotate(${angle}deg)`;
                line.style.opacity = connection.strength;
                
                container.appendChild(line);
            }
            
            renderHubGrid() {
                const grid = document.getElementById('hubGrid');
                if (!grid) return;
                
                const hubs = [
                    { icon: 'üíª', title: 'Digital Sovereign Hub', members: 423, growth: '12%', tribe: 'Nomads' },
                    { icon: 'üçÑ', title: 'Consciousness Center', members: 287, growth: '18%', tribe: 'Healers' },
                    { icon: 'üèóÔ∏è', title: 'Parallel Economy Lab', members: 512, growth: '25%', tribe: 'Builders' },
                    { icon: 'üõ°Ô∏è', title: 'Resilience Base', members: 189, growth: '8%', tribe: 'Preppers' },
                    { icon: 'üìú', title: 'Wisdom Archive', members: 156, growth: '5%', tribe: 'Knowledge Keepers' },
                    { icon: 'üåø', title: 'Seed Vault', members: 8427, growth: '2%', tribe: 'All Tribes' }
                ];
                
                grid.innerHTML = hubs.map(hub => `
                    <div class="hub-card" onclick="ecosystem.showHubDetails('${hub.tribe}')">
                        <div class="hub-icon">${hub.icon}</div>
                        <h3>${hub.title}</h3>
                        <p>${hub.tribe} Territory</p>
                        <div class="hub-stats">
                            <span>üë• ${hub.members.toLocaleString()}</span>
                            <span style="color: var(--growth-green);">üìà ${hub.growth}</span>
                        </div>
                    </div>
                `).join('');
            }
            
            renderSheetsGrid() {
                const grid = document.getElementById('sheetsGrid');
                if (!grid) return;
                
                const sheetData = [
                    ['Total Seeds', this.ecosystem.seeds.toLocaleString()],
                    ['Active Tribes', this.ecosystem.tribes],
                    ['Connections', this.ecosystem.connections.toLocaleString()],
                    ['Ecosystem Value', `$${this.ecosystem.value.toLocaleString()}`],
                    ['Last Activity', this.ecosystem.activity.length > 0 ? 
                        new Date(this.ecosystem.activity[this.ecosystem.activity.length - 1].timestamp).toLocaleTimeString() : 
                        'None'
                    ],
                    ['Node Count', this.ecosystem.nodes.length]
                ];
                
                grid.innerHTML = sheetData.map(([label, value]) => `
                    <div class="sheet-cell">
                        <strong>${label}:</strong><br>
                        ${value}
                    </div>
                `).join('');
            }
            
            // =============================================
            // UI UPDATES
            // =============================================
            
            updateUI() {
                document.getElementById('totalSeeds').textContent = 
                    this.ecosystem.seeds.toLocaleString();
                document.getElementById('activeTribes').textContent = 
                    this.ecosystem.tribes;
                document.getElementById('connectionsMade').textContent = 
                    this.ecosystem.connections.toLocaleString();
                document.getElementById('ecosystemValue').textContent = 
                    `$${(this.ecosystem.value / 1000000000).toFixed(1)}B`;
                
                this.renderSheetsGrid();
            }
            
            addActivityToFeed(activity) {
                const feed = document.getElementById('activityFeed');
                if (!feed) return;
                
                const activityEl = document.createElement('div');
                activityEl.className = 'feed-item';
                activityEl.innerHTML = `
                    <strong>${this.getActivityIcon(activity.type)} ${activity.message}</strong><br>
                    <small style="opacity: 0.7;">
                        ${new Date(activity.timestamp).toLocaleTimeString()} ‚Ä¢ 
                        +$${activity.value.toLocaleString()} to ecosystem
                    </small>
                `;
                
                feed.insertBefore(activityEl, feed.firstChild);
                
                // Keep only last 10 activities visible
                while (feed.children.length > 10) {
                    feed.removeChild(feed.lastChild);
                }
            }
            
            // =============================================
            // HELPER METHODS
            // =============================================
            
            getNodeColor(type) {
                const colors = {
                    'seed': 'var(--growth-green)',
                    'tribe': 'var(--water-blue)',
                    'knowledge': 'var(--sun-gold)',
                    'builder': 'var(--root-purple)',
                    'connection': 'var(--mycelium-white)'
                };
                return colors[type] || 'var(--soil-brown)';
            }
            
            getNodeIcon(type) {
                const icons = {
                    'seed': 'üå±',
                    'tribe': 'üèòÔ∏è',
                    'knowledge': 'üìö',
                    'builder': 'üë∑',
                    'connection': 'üîó'
                };
                return icons[type] || '‚ö´';
            }
            
            getActivityIcon(type) {
                const icons = {
                    'seed_planted': 'üå±',
                    'connection_made': 'üîó',
                    'knowledge_shared': 'üìö',
                    'builder_joined': 'üë∑',
                    'tribe_formed': 'üèòÔ∏è'
                };
                return icons[type] || '‚ö™';
            }
            
            showNodeDetails(node) {
                alert(`Node Details:\n\n` +
                      `Type: ${node.type}\n` +
                      `Tribe: ${node.tribe}\n` +
                      `Value: $${node.value.toLocaleString()}\n` +
                      `Position: ${node.x}%, ${node.y}%\n\n` +
                      `Click "Connect Tribes" to link this node to others.`);
            }
            
            showHubDetails(tribe) {
                alert(`${tribe} Hub\n\n` +
                      `This is the central coordination point for the ${tribe} community.\n` +
                      `Members share resources, knowledge, and collaborate on projects.\n\n` +
                      `Book a visit through TripsToColombia.com to connect directly.`);
            }
            
            autoConnectBuilder(builder) {
                // Auto-connect new builder to relevant existing nodes
                const relevantNodes = this.ecosystem.nodes.filter(node => {
                    if (builder.type.includes('Permaculturist')) {
                        return node.tribe === 'Prepper' || node.type === 'seed';
                    } else if (builder.type.includes('Digital')) {
                        return node.tribe === 'Nomad' || node.type === 'knowledge';
                    } else if (builder.type.includes('Healing')) {
                        return node.tribe === 'Healer' || node.type === 'seed';
                    } else if (builder.type.includes('Knowledge')) {
                        return node.tribe === 'Wisdom Keeper' || node.type === 'knowledge';
                    }
                    return false;
                });
                
                if (relevantNodes.length > 0) {
                    relevantNodes.slice(0, 2).forEach(node => {
                        this.connectTribes(); // Will create connections
                    });
                }
            }
            
            createGrowthAnimation() {
                // Create growth particles
                for (let i = 0; i < 5; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'growth-particle';
                    particle.style.left = `${Math.random() * 100}vw`;
                    particle.style.top = `${Math.random() * 100}vh`;
                    
                    document.body.appendChild(particle);
                    
                    // Animate
                    particle.animate([
                        { transform: 'scale(0)', opacity: 1 },
                        { transform: 'scale(1)', opacity: 0 }
                    ], {
                        duration: 1000 + Math.random() * 1000,
                        easing: 'ease-out'
                    }).onfinish = () => particle.remove();
                }
            }
            
            startEcosystemPulse() {
                // Automatic ecosystem growth
                setInterval(() => {
                    // Occasional auto-growth
                    if (Math.random() > 0.7) {
                        this.ecosystem.seeds += Math.floor(Math.random() * 10);
                        this.ecosystem.value += Math.floor(Math.random() * 10000);
                        this.updateUI();
                        
                        // Sync every 30 seconds of activity
                        if (Math.random() > 0.8) {
                            this.syncToSheets();
                        }
                    }
                }, 5000);
            }
            
            initializeLocalEcosystem() {
                // Initialize with local data
                console.log('Initializing local ecosystem...');
            }
        }
        
        // =============================================
        // GOOGLE APPS SCRIPT BACKEND CODE
        // =============================================
        
        /* 
        PASTE THIS INTO GOOGLE APPS SCRIPT (Tools ‚Üí Script Editor)
        
        function doGet() {
            return ContentService.createTextOutput(
                JSON.stringify({
                    status: 'success',
                    message: 'Ecosystem API is running',
                    timestamp: new Date().toISOString()
                })
            ).setMimeType(ContentService.MimeType.JSON);
        }
        
        function doPost(e) {
            try {
                const data = JSON.parse(e.postData.contents);
                const sheet = SpreadsheetApp.openById('YOUR_SHEET_ID').getSheetByName('Ecosystem_Master');
                
                // Append data
                sheet.appendRow([
                    new Date(),
                    data.seeds,
                    data.tribes,
                    data.connections,
                    data.value,
                    JSON.stringify(data.nodes),
                    JSON.stringify(data.edges),
                    JSON.stringify(data.activity)
                ]);
                
                return ContentService.createTextOutput(
                    JSON.stringify({
                        status: 'success',
                        message: 'Data saved to Google Sheets',
                        row: sheet.getLastRow()
                    })
                ).setMimeType(ContentService.MimeType.JSON);
                
            } catch (error) {
                return ContentService.createTextOutput(
                    JSON.stringify({
                        status: 'error',
                        message: error.toString()
                    })
                ).setMimeType(ContentService.MimeType.JSON);
            }
        }
        
        function getEcosystemData() {
            const sheet = SpreadsheetApp.openById('YOUR_SHEET_ID').getSheetByName('Ecosystem_Master');
            const data = sheet.getDataRange().getValues();
            
            return {
                headers: data[0],
                rows: data.slice(1)
            };
        }
        */
        
        // =============================================
        // INITIALIZE ECOSYSTEM
        // =============================================
        
        let ecosystem;
        
        document.addEventListener('DOMContentLoaded', () => {
            ecosystem = new GoogleSheetsEcosystem();
            
            // Make functions globally available
            window.plantSeed = () => ecosystem.plantSeed();
            window.connectTribes = () => ecosystem.connectTribes();
            window.shareKnowledge = () => ecosystem.shareKnowledge();
            window.inviteBuilder = () => ecosystem.inviteBuilder();
            window.syncWithSheets = () => ecosystem.syncToSheets();
            window.ecosystem = ecosystem;
            
            // Initial activity feed
            setTimeout(() => {
                ecosystem.addActivityToFeed({
                    type: 'system_start',
                    message: 'Living Seed Ecosystem activated',
                    value: 0,
                    timestamp: new Date().toISOString()
                });
            }, 1000);
        });
        
        // Auto-save to Google Sheets every 60 seconds
        setInterval(() => {
            if (ecosystem) {
                ecosystem.syncToSheets();
            }
        }, 60000);
    </script>
</body>
</html>
