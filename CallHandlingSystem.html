<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EQUITY POWER TOOLS: Interactive Call Simulator</title>
    <style>
        :root { --primary: #1a237e; --secondary: #283593; --accent: #3949ab; --success: #2e7d32; --warning: #f9a825; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: system-ui, sans-serif; background: #f5f7fa; padding: 20px; color: #333; line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); overflow: hidden; }
        header { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; padding: 2rem; text-align: center; }
        h1 { font-size: 2.2rem; margin-bottom: 0.5rem; }
        .main { display: flex; flex-wrap: wrap; min-height: 60vh; }
        .simulator, .log-panel { padding: 1.5rem; }
        .simulator { flex: 3; border-right: 1px solid #eee; }
        .log-panel { flex: 2; background: #f9f9ff; }
        .status-bar { background: #e8f4ff; border-radius: 10px; padding: 1rem; margin-bottom: 1.5rem; display: flex; justify-content: space-around; text-align: center; }
        .status-value { font-size: 1.8rem; font-weight: bold; color: var(--accent); font-family: monospace; }
        .btn { padding: 12px 24px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin: 5px; }
        .btn-primary { background: var(--accent); color: white; }
        .btn-success { background: var(--success); color: white; }
        .step { background: #fff; border-radius: 10px; padding: 1.5rem; margin-bottom: 1rem; border: 1px solid #eee; }
        .step.hidden { display: none; }
        .user-line { background: #e8f5e9; padding: 1rem; border-radius: 8px; margin: 1rem 0; border-left: 4px solid var(--success); font-weight: 600; }
        .input-group { margin: 1rem 0; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: var(--primary); }
        input, textarea, select { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 6px; font-size: 1rem; }
        .call-log { background: white; border-radius: 10px; padding: 1.5rem; font-family: 'Courier New', monospace; white-space: pre-wrap; border: 2px solid #e0e0e0; height: 350px; overflow-y: auto; margin-bottom: 1rem; }
        footer { background: var(--primary); color: white; text-align: center; padding: 1.5rem; margin-top: 2rem; }
        @media (max-width: 768px) { .main { flex-direction: column; } .simulator { border-right: none; border-bottom: 1px solid #eee; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div style="background:var(--accent); display:inline-block; padding:5px 15px; border-radius:20px; margin-bottom:1rem; font-size:0.9rem; font-weight:bold;">EQUITY POWER TOOLS SUITE</div>
            <h1>Interactive Call Simulator</h1>
            <p>Practice, record, and internalize the equity-based call handling script.</p>
            <div style="margin-top:1rem; font-weight:bold;">TOOL #1: CALL SIMULATOR & LOG</div>
        </header>

        <div class="main">
            <!-- SIMULATOR PANEL -->
            <section class="simulator">
                <h2>Call Simulation</h2>
                <div class="status-bar">
                    <div><div style="font-size:0.9rem; color:#555;">Status</div><div class="status-value" id="statusDisplay">READY</div></div>
                    <div><div style="font-size:0.9rem; color:#555;">Duration</div><div class="status-value" id="timerDisplay">00:00</div></div>
                    <div><div style="font-size:0.9rem; color:#555;">Step</div><div class="status-value" id="stepDisplay">1/4</div></div>
                </div>

                <div style="margin-bottom:1.5rem;">
                    <button class="btn btn-primary" id="startBtn" onclick="startCall()">▶ Start Simulation</button>
                    <button class="btn btn-success" id="nextBtn" onclick="nextStep()" disabled>Next Step ►</button>
                    <button class="btn" onclick="resetAll()" style="background:#f1f1f1;">↻ Reset</button>
                </div>

                <!-- STEP 1 -->
                <div class="step" id="step1">
                    <h3>1. Gather Information</h3>
                    <div class="user-line">"Well, thank you so much for calling. Who am I speaking with?"</div>
                    <div class="input-group"><label>Collector's Name:</label><input type="text" id="collectorName" placeholder="Enter name..."></div>
                    <div class="user-line">"Do you have an employee ID? Company? Mailing address?"</div>
                    <div class="input-group"><label>Employee ID:</label><input type="text" id="employeeId" placeholder="e.g., 45872-X"></div>
                    <div class="input-group"><label>Company:</label><input type="text" id="companyName" placeholder="e.g., National Credit Solutions"></div>
                    <div class="input-group"><label>Mailing Address:</label><input type="text" id="companyAddress" placeholder="Full address..."></div>
                    <div class="user-line">"What is the reference number for the commercial instrument?"</div>
                    <div class="input-group"><label>Instrument / Account #:</label><input type="text" id="accountNumber" placeholder="Enter number..."></div>
                </div>

                <!-- STEP 2 -->
                <div class="step hidden" id="step2">
                    <h3>2. Make the Equity Request</h3>
                    <div class="user-line">"Great. So, what is it you're needing from me today?"</div>
                    <div class="input-group"><label>Collector's Demand:</label><input type="text" id="collectorDemand" placeholder="e.g., 'Payment of $1,250'"></div>
                    <div class="user-line">"Thank you. For equitable settlement, I require proper written presentment. Mail it to me and I will honor it."</div>
                    <div class="input-group"><label>Their Response:</label><input type="text" id="responseToRequest" placeholder="What do they say?"></div>
                </div>

                <!-- STEP 3 -->
                <div class="step hidden" id="step3">
                    <h3>3. Handle Objections</h3>
                    <div style="background:#fff3e0; padding:1rem; border-radius:8px; margin:1rem 0;">"You haven't made payments on this account."</div>
                    <div class="user-line">"Does your record reflect that I have accepted and returned all presentments?"</div>
                    <div class="input-group"><label>Their Reaction:</label><textarea id="collectorObjection" rows="2" placeholder="Type response..."></textarea></div>
                    <div class="user-line">"A presentment requires acceptance. I require proper written form to accept and honor equitably."</div>
                </div>

                <!-- STEP 4 -->
                <div class="step hidden" id="step4">
                    <h3>4. Call Conclusion</h3>
                    <div class="input-group"><label>How did the call end?</label>
                        <select id="endingType">
                            <option value="">Select...</option>
                            <option value="agreed">They agreed to send written presentment</option>
                            <option value="refused">They refused</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="user-line" id="endingAgreed">"Thank you. I will watch for your mailing. Have a good day."</div>
                    <div class="user-line hidden" id="endingRefused">"Since you cannot provide written presentment, nothing further can be honored. Thank you."</div>
                </div>
            </section>

            <!-- LOG PANEL -->
            <section class="log-panel">
                <h2>Call Log & Record</h2>
                <p>This log builds as you complete the simulation.</p>
                <div class="call-log" id="callLog">
========================================
EQUITY CALL LOG
========================================
Date: <span id="logDate">[Date]</span>
Time: <span id="logTime">[Time]</span>
Call Reference: EQUITY-CALL-<span id="logId">0000</span>
Duration: <span id="logDuration">00:00</span>

1. COLLECTOR INFO:
Name: [Waiting...]
ID: [Waiting...]
Company: [Waiting...]
Address: [Waiting...]
Instrument #: [Waiting...]

2. DEMAND:
[Waiting...]

3. EQUITY REQUEST & RESPONSE:
[Waiting...]

4. OBJECTIONS:
[Waiting...]

5. CONCLUSION:
[Waiting...]
========================================
                </div>
                <div>
                    <button class="btn btn-primary" onclick="updateLogNow()">Update Live Log</button>
                    <button class="btn btn-success" onclick="downloadLog()">Download Final Log</button>
                    <button class="btn" onclick="copyLog()" style="border:2px solid var(--accent); background:transparent;">Copy to Clipboard</button>
                </div>
            </section>
        </div>

        <footer>
            <p>Equity Power Tools Suite • Tool #1: Call Simulator</p>
            <p style="opacity:0.8; margin-top:0.5rem; font-size:0.9rem;">A gift built with respect for the teachings of Julian and Margaret Swan.</p>
        </footer>
    </div>

    <script>
        // SIMPLE, WORKING JAVASCRIPT
        let callActive = false, currentStep = 1, startTime = null, timerInterval = null;
        let callId = Math.floor(1000 + Math.random() * 9000);

        // Initialize
        window.onload = function() {
            document.getElementById('logId').textContent = callId;
            const now = new Date();
            document.getElementById('logDate').textContent = now.toLocaleDateString();
            document.getElementById('logTime').textContent = now.toLocaleTimeString();
            document.getElementById('endingType').addEventListener('change', function() {
                document.getElementById('endingAgreed').classList.toggle('hidden', this.value !== 'agreed');
                document.getElementById('endingRefused').classList.toggle('hidden', this.value !== 'refused');
            });
        };

        function startCall() {
            if (callActive) return;
            callActive = true;
            startTime = new Date();
            document.getElementById('statusDisplay').textContent = 'IN PROGRESS';
            document.getElementById('startBtn').disabled = true;
            document.getElementById('nextBtn').disabled = false;
            timerInterval = setInterval(updateTimer, 1000);
            enableInputs(1);
            alert("Simulation started!");
        }

        function updateTimer() {
            if (!startTime) return;
            const diff = Math.floor((new Date() - startTime) / 1000);
            const min = Math.floor(diff / 60).toString().padStart(2, '0');
            const sec = (diff % 60).toString().padStart(2, '0');
            document.getElementById('timerDisplay').textContent = `${min}:${sec}`;
            document.getElementById('logDuration').textContent = `${min}:${sec}`;
        }

        function nextStep() {
            if (currentStep >= 4) return;
            document.getElementById('step' + currentStep).classList.add('hidden');
            currentStep++;
            document.getElementById('step' + currentStep).classList.remove('hidden');
            document.getElementById('stepDisplay').textContent = currentStep + '/4';
            enableInputs(currentStep);
            updateLogNow();
        }

        function enableInputs(step) {
            document.querySelectorAll('input, textarea, select').forEach(el => el.disabled = true);
            let ids = [];
            if (step === 1) ids = ['collectorName', 'employeeId', 'companyName', 'companyAddress', 'accountNumber'];
            if (step === 2) ids = ['collectorDemand', 'responseToRequest'];
            if (step === 3) ids = ['collectorObjection'];
            if (step === 4) ids = ['endingType'];
            ids.forEach(id => { let el = document.getElementById(id); if(el) el.disabled = false; });
        }

        function updateLogNow() {
            const data = {
                name: document.getElementById('collectorName').value,
                id: document.getElementById('employeeId').value,
                company: document.getElementById('companyName').value,
                address: document.getElementById('companyAddress').value,
                instrument: document.getElementById('accountNumber').value,
                demand: document.getElementById('collectorDemand').value,
                response: document.getElementById('responseToRequest').value,
                objection: document.getElementById('collectorObjection').value,
                ending: document.getElementById('endingType').value
            };
            const logText = `========================================
EQUITY CALL LOG
========================================
Date: ${document.getElementById('logDate').textContent}
Time: ${document.getElementById('logTime').textContent}
Call Reference: EQUITY-CALL-${callId}
Duration: ${document.getElementById('logDuration').textContent}

1. COLLECTOR INFO:
Name: ${data.name || '[Waiting...]'}
ID: ${data.id || '[Waiting...]'}
Company: ${data.company || '[Waiting...]'}
Address: ${data.address || '[Waiting...]'}
Instrument #: ${data.instrument || '[Waiting...]'}

2. DEMAND:
${data.demand || '[Waiting...]'}

3. EQUITY REQUEST & RESPONSE:
${data.response || '[Waiting...]'}

4. OBJECTIONS:
${data.objection || '[Waiting...]'}

5. CONCLUSION:
${data.ending || '[Waiting...]'}
========================================`;
            document.getElementById('callLog').textContent = logText;
        }

        function downloadLog() {
            updateLogNow();
            const logText = document.getElementById('callLog').textContent;
            const blob = new Blob([logText], {type: 'text/plain'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'Equity-Call-Log-' + callId + '.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function copyLog() {
            updateLogNow();
            const logText = document.getElementById('callLog').textContent;
            navigator.clipboard.writeText(logText).then(() => alert('Log copied to clipboard!'));
        }

        function resetAll() {
            callActive = false;
            currentStep = 1;
            clearInterval(timerInterval);
            document.getElementById('statusDisplay').textContent = 'READY';
            document.getElementById('timerDisplay').textContent = '00:00';
            document.getElementById('stepDisplay').textContent = '1/4';
            document.getElementById('startBtn').disabled = false;
            document.getElementById('nextBtn').disabled = true;
            [1,2,3,4].forEach(i => {
                let el = document.getElementById('step' + i);
                el.classList[i===1?'remove':'add']('hidden');
            });
            document.querySelectorAll('input, textarea, select').forEach(el => { el.value = ''; el.disabled = true; });
            document.getElementById('endingType').value = '';
            callId = Math.floor(1000 + Math.random() * 9000);
            document.getElementById('logId').textContent = callId;
            updateLogNow();
            alert('Simulation reset.');
        }
    </script>
</body>
</html>
