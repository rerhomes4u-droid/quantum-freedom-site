// Educational Content for Lessons
const lessonContent = {
    en: {
        1: {
            title: "üá®üá¥ Colombian Culture & Etiquette",
            content: `
                <h3>Understanding Colombian Soul</h3>
                <p>Colombia's culture is a vibrant tapestry woven from indigenous, Spanish, and African influences. Understanding these nuances will transform your travel experience.</p>
                
                <h4>Key Cultural Insights:</h4>
                <ul>
                    <li><strong>Warm Greetings:</strong> Handshakes with direct eye contact for business, cheek kisses among friends</li>
                    <li><strong>Punctuality:</strong> "Colombian time" often means 15-30 minutes late for social events</li>
                    <li><strong>Family First:</strong> Family is central to Colombian life - expect questions about yours</li>
                    <li><strong>Regional Pride:</strong> Each region has distinct traditions - embrace the diversity</li>
                </ul>
                
                <h4>Essential Etiquette:</h4>
                <p>Always use "usted" (formal you) until invited to use "t√∫." Dress modestly when visiting churches. Never refuse coffee when offered - it's a gesture of friendship.</p>
            `
        },
        2: {
            title: "üõ°Ô∏è Safety & Smart Preparation",
            content: `
                <h3>Travel Smart in Modern Colombia</h3>
                <p>Colombia has transformed dramatically. With proper preparation, you'll enjoy one of South America's safest travel experiences.</p>
                
                <h4>Safety Essentials 2024:</h4>
                <ul>
                    <li><strong>Urban Awareness:</strong> Use registered taxis, avoid flashing valuables, stay in well-lit areas</li>
                    <li><strong>Digital Safety:</strong> Use VPN on public WiFi, keep digital copies of documents</li>
                    <li><strong>Health Precautions:</strong> Yellow fever vaccination recommended, bottled water in rural areas</li>
                    <li><strong>Emergency Numbers:</strong> 123 (general emergency), 125 (health emergency)</li>
                </ul>
                
                <h4>Must-Have Documents:</h4>
                <p>Valid passport (6+ months), copies of insurance, emergency contacts, and your TripsToColombia.com itinerary.</p>
            `
        },
        3: {
            title: "üèîÔ∏è Must-Visit Destinations",
            content: `
                <h3>Colombia's Life-Changing Destinations</h3>
                <p>From Caribbean coast to Amazon rainforest, Colombia offers unparalleled diversity. Here are the destinations that will steal your heart.</p>
                
                <h4>Coastal Paradise:</h4>
                <ul>
                    <li><strong>Cartagena:</strong> Colonial walled city with vibrant Caribbean energy</li>
                    <li><strong>Santa Marta:</strong> Gateway to Tayrona National Park and Lost City trek</li>
                    <li><strong>San Andr√©s:</strong> Caribbean island with stunning beaches and reggae culture</li>
                </ul>
                
                <h4>Andean Wonders:</h4>
                <ul>
                    <li><strong>Medell√≠n:</strong> City of eternal spring with innovative urban transformation</li>
                    <li><strong>Bogot√°:</strong> Capital city with world-class museums and Andean backdrop</li>
                    <li><strong>Cali:</strong> Salsa capital of the world with infectious rhythm</li>
                </ul>
                
                <h4>Unique Experiences:</h4>
                <p>Coffee region farms, Amazon jungle lodges, and the surreal Ca√±o Cristales river.</p>
            `
        },
        4: {
            title: "üçç Local Cuisine Guide",
            content: `
                <h3>Flavors That Define Colombia</h3>
                <p>Colombian cuisine tells the story of its regions. Each dish reflects local ingredients, history, and cultural fusion.</p>
                
                <h4>Must-Try National Dishes:</h4>
                <ul>
                    <li><strong>Bandeja Paisa:</strong> Hearty platter with beans, rice, chorizo, avocado, and more</li>
                    <li><strong>Ajiaco:</strong> Bogot√°'s signature chicken and potato soup</li>
                    <li><strong>Arepas:</strong> Corn cakes enjoyed nationwide with regional variations</li>
                    <li><strong>Sancocho:</strong> Traditional stew perfect for sharing</li>
                </ul>
                
                <h4>Street Food Safely:</h4>
                <p>Look for busy vendors with high turnover. Empanadas, bu√±uelos, and obleas are safe bets. Avoid unpasteurized dairy and unpeeled fruits.</p>
                
                <h4>Regional Specialties:</h4>
                <p>Coastal seafood, Amazon exotic fruits, Andean comfort foods - each region offers unique culinary adventures.</p>
            `
        },
        5: {
            title: "üöó Transportation & Navigation",
            content: `
                <h3>Navigating Colombia Like a Local</h3>
                <p>Colombia's diverse geography requires smart transportation choices. Here's how to move smoothly between paradises.</p>
                
                <h4>Urban Transportation:</h4>
                <ul>
                    <li><strong>TransMilenio (Bogot√°):</strong> Bus rapid transit system - get a Tu Llave card</li>
                    <li><strong>Metro (Medell√≠n):</strong> South America's only metro system with cable car connections</li>
                    <li><strong>Ride-Sharing:</strong> Uber, Didi, and Beat operate in major cities</li>
                    <li><strong>Taxis:</strong> Always use registered taxis or apps - never hail on street</li>
                </ul>
                
                <h4>Inter-City Travel:</h4>
                <ul>
                    <li><strong>Domestic Flights:</strong> Affordable between major cities - book in advance</li>
                    <li><strong>Buses:</strong> Comfortable long-distance buses with amazing mountain views</li>
                    <li><strong>Rental Cars:</strong> Recommended for coffee region, challenging in cities</li>
                </ul>
                
                <h4>Pro Tips:</h4>
                <p>Download maps offline, learn basic Spanish directions, and always add buffer time for mountain roads.</p>
            `
        }
    },
    es: {
        1: {
            title: "üá®üá¥ Cultura y Etiqueta Colombiana",
            content: `
                <h3>Entendiendo el Alma Colombiana</h3>
                <p>La cultura colombiana es un tapiz vibrante tejido de influencias ind√≠genas, espa√±olas y africanas. Entender estos matices transformar√° tu experiencia de viaje.</p>
                
                <h4>Ideas Culturales Clave:</h4>
                <ul>
                    <li><strong>Saludos C√°lidos:</strong> Apret√≥n de manos con contacto visual directo para negocios, besos en la mejilla entre amigos</li>
                    <li><strong>Puntualidad:</strong> "La hora colombiana" a menudo significa 15-30 minutos tarde para eventos sociales</li>
                    <li><strong>La Familia Primero:</strong> La familia es central en la vida colombiana - espera preguntas sobre la tuya</li>
                    <li><strong>Orgullo Regional:</strong> Cada regi√≥n tiene tradiciones distintas - abraza la diversidad</li>
                </ul>
                
                <h4>Etiqueta Esencial:</h4>
                <p>Siempre usa "usted" hasta que te inviten a usar "t√∫". Viste modestamente al visitar iglesias. Nunca rechaces caf√© cuando te lo ofrezcan - es un gesto de amistad.</p>
            `
        },
        2: {
            title: "üõ°Ô∏è Seguridad y Preparaci√≥n Inteligente",
            content: `
                <h3>Viaja con Inteligencia en la Colombia Moderna</h3>
                <p>Colombia se ha transformado dram√°ticamente. Con la preparaci√≥n adecuada, disfrutar√°s una de las experiencias de viaje m√°s seguras de Sudam√©rica.</p>
                
                <h4>Esenciales de Seguridad 2024:</h4>
                <ul>
                    <li><strong>Conciencia Urbana:</strong> Usa taxis registrados, evita mostrar objetos de valor, permanece en √°reas bien iluminadas</li>
                    <li><strong>Seguridad Digital:</strong> Usa VPN en WiFi p√∫blico, guarda copias digitales de documentos</li>
                    <li><strong>Precauciones de Salud:</strong> Vacuna de fiebre amarilla recomendada, agua embotellada en √°reas rurales</li>
                    <li><strong>N√∫meros de Emergencia:</strong> 123 (emergencia general), 125 (emergencia de salud)</li>
                </ul>
                
                <h4>Documentos Imprescindibles:</h4>
                <p>Pasaporte v√°lido (6+ meses), copias del seguro, contactos de emergencia, y tu itinerario de TripsToColombia.com.</p>
            `
        },
        3: {
            title: "üèîÔ∏è Destinos que Debes Visitar",
            content: `
                <h3>Destinos Colombianos que Cambian Vidas</h3>
                <p>Desde la costa Caribe hasta la selva Amaz√≥nica, Colombia ofrece una diversidad sin igual. Estos son los destinos que te robar√°n el coraz√≥n.</p>
                
                <h4>Para√≠so Costero:</h4>
                <ul>
                    <li><strong>Cartagena:</strong> Ciudad amurallada colonial con energ√≠a caribe√±a vibrante</li>
                    <li><strong>Santa Marta:</strong> Puerta de entrada al Parque Tayrona y trek a Ciudad Perdida</li>
                    <li><strong>San Andr√©s:</strong> Isla caribe√±a con playas impresionantes y cultura reggae</li>
                </ul>
                
                <h4>Maravillas Andinas:</h4>
                <ul>
                    <li><strong>Medell√≠n:</strong> Ciudad de la eterna primavera con transformaci√≥n urbana innovadora</li>
                    <li><strong>Bogot√°:</strong> Capital con museos de clase mundial y fondo andino</li>
                    <li><strong>Cali:</strong> Capital mundial de la salsa con ritmo contagioso</li>
                </ul>
                
                <h4>Experiencias √önicas:</h4>
                <p>Fincas de la regi√≥n cafetera, lodges de la selva amaz√≥nica, y el surreal r√≠o Ca√±o Cristales.</p>
            `
        },
        4: {
            title: "üçç Gu√≠a de Gastronom√≠a Local",
            content: `
                <h3>Sabores que Definen a Colombia</h3>
                <p>La cocina colombiana cuenta la historia de sus regiones. Cada plato refleja ingredientes locales, historia y fusi√≥n cultural.</p>
                
                <h4>Platos Nacionales que Debes Probar:</h4>
                <ul>
                    <li><strong>Bandeja Paisa:</strong> Plato abundante con frijoles, arroz, chorizo, aguacate y m√°s</li>
                    <li><strong>Ajiaco:</strong> Sopa signature de Bogot√° con pollo y papas</li>
                    <li><strong>Arepas:</strong> Tortas de ma√≠z disfrutadas nacionalmente con variaciones regionales</li>
                    <li><strong>Sancocho:</strong> Guiso tradicional perfecto para compartir</li>
                </ul>
                
                <h4>Comida Callejera Segura:</h4>
                <p>Busca vendedores concurridos con alta rotaci√≥n. Empanadas, bu√±uelos y obleas son apuestas seguras. Evita l√°cteos no pasteurizados y frutas sin pelar.</p>
                
                <h4>Especialidades Regionales:</h4>
                <p>Mariscos costeros, frutas ex√≥ticas amaz√≥nicas, comidas comfort andinas - cada regi√≥n ofrece aventuras culinarias √∫nicas.</p>
            `
        },
        5: {
            title: "üöó Transporte y Navegaci√≥n",
            content: `
                <h3>Navegando Colombia Como Local</h3>
                <p>La geograf√≠a diversa de Colombia requiere elecciones inteligentes de transporte. As√≠ es como moverte suavemente entre para√≠sos.</p>
                
                <h4>Transporte Urbano:</h4>
                <ul>
                    <li><strong>TransMilenio (Bogot√°):</strong> Sistema de tr√°nsito r√°pido de buses - consigue una tarjeta Tu Llave</li>
                    <li><strong>Metro (Medell√≠n):</strong> √önico sistema de metro en Sudam√©rica con conexiones de // ... (previous lesson content continues) ...

// Tool Functions - LIBERATION INSTRUMENTS
function openTool(toolType) {
    const modal = document.getElementById('lessonModal');
    const modalBody = document.getElementById('modalBody');
    
    const toolContent = {
        letter: {
            en: {
                title: "‚úâÔ∏è Liberation Letter Builder",
                content: `
                    <h3>Invite Others to Paradise</h3>
                    <p>Create compelling invitation letters to bring friends and family to Colombian freedom.</p>
                    
                    <div class="tool-interface">
                        <label>Recipient Name:</label>
                        <input type="text" id="recipientName" placeholder="Enter friend's name" style="width: 100%; padding: 0.5rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 5px;">
                        
                        <label>Your Relationship:</label>
                        <select id="relationship" style="width: 100%; padding: 0.5rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 5px;">
                            <option value="friend">Friend</option>
                            <option value="family">Family</option>
                            <option value="colleague">Colleague</option>
                        </select>
                        
                        <label>Travel Dates:</label>
                        <input type="text" id="travelDates" placeholder="e.g., December 15-30, 2024" style="width: 100%; padding: 0.5rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 5px;">
                        
                        <button onclick="generateLetter()" class="lesson-btn" style="margin-top: 1rem;">Generate Liberation Letter</button>
                        
                        <div id="letterOutput" style="margin-top: 2rem; padding: 1rem; background: #f8f9fa; border-radius: 10px; display: none;">
                            <h4>Your Generated Letter:</h4>
                            <div id="letterContent"></div>
                            <button onclick="copyToClipboard()" class="tool-btn" style="margin-top: 1rem;">Copy to Clipboard</button>
                        </div>
                    </div>
                `
            },
            es: {
                title: "‚úâÔ∏è Creador de Cartas de Liberaci√≥n",
                content: `
                    <h3>Invita a Otros al Para√≠so</h3>
                    <p>Crea cartas de invitaci√≥n convincentes para traer amigos y familiares a la libertad colombiana.</p>
                    
                    <div class="tool-interface">
                        <label>Nombre del Destinatario:</label>
                        <input type="text" id="recipientName" placeholder="Ingresa el nombre de tu amigo" style="width: 100%; padding: 0.5rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 5px;">
                        
                        <label>Tu Relaci√≥n:</label>
                        <select id="relationship" style="width: 100%; padding: 0.5rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 5px;">
                            <option value="friend">Amigo/a</option>
                            <option value="family">Familiar</option>
                            <option value="colleague">Colega</option>
                        </select>
                        
                        <label>Fechas de Viaje:</label>
                        <input type="text" id="travelDates" placeholder="ej. 15-30 de Diciembre, 2024" style="width: 100%; padding: 0.5rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 5px;">
                        
                        <button onclick="generateLetter()" class="lesson-btn" style="margin-top: 1rem;">Generar Carta de Liberaci√≥n</button>
                        
                        <div id="letterOutput" style="margin-top: 2rem; padding: 1rem; background: #f8f9fa; border-radius: 10px; display: none;">
                            <h4>Tu Carta Generada:</h4>
                            <div id="letterContent"></div>
                            <button onclick="copyToClipboard()" class="tool-btn" style="margin-top: 1rem;">Copiar al Portapapeles</button>
                        </div>
                    </div>
                `
            }
        },
        planner: {
            en: {
                title: "üìÖ Liberation Journey Planner",
                content: `
                    <h3>Design Your Paradise Itinerary</h3>
                    <p>Build the perfect Colombian journey that will transform your life forever.</p>
                    
                    <div class="tool-interface">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                            <div>
                                <label>Start Date:</label>
                                <input type="date" id="startDate" style="width: 100%; padding: 0.5rem; border: 2px solid #ddd; border-radius: 5px;">
                            </div>
                            <div>
                                <label>Duration:</label>
                                <select id="duration" style="width: 100%; padding: 0.5rem; border: 2px solid #ddd; border-radius: 5px;">
                                    <option value="7">7 days</option>
                                    <option value="10">10 days</option>
                                    <option value="14">14 days</option>
                                    <option value="21">21 days</option>
                                    <option value="30">30 days</option>
                                </select>
                            </div>
                        </div>
                        
                        <label>Destinations (select multiple):</label>
                        <div style="margin: 0.5rem 0;">
                            <input type="checkbox" id="cartagena" value="Cartagena"> <label for="cartagena">Cartagena</label><br>
                            <input type="checkbox" id="medellin" value="Medell√≠n"> <label for="medellin">Medell√≠n</label><br>
                            <input type="checkbox" id="bogota" value="Bogot√°"> <label for="bogota">Bogot√°</label><br>
                            <input type="checkbox" id="santaMarta" value="Santa Marta"> <label for="santaMarta">Santa Marta</label><br>
                            <input type="checkbox" id="coffeeRegion" value="Coffee Region"> <label for="coffeeRegion">Coffee Region</label>
                        </div>
                        
                        <label>Travel Style:</label>
                        <select id="travelStyle" style="width: 100%; padding: 0.5rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 5px;">
                            <option value="budget">Budget Adventurer</option>
                            <option value="comfort">Comfort Seeker</option>
                            <option value="luxury">Luxury Explorer</option>
                        </select>
                        
                        <button onclick="generateItinerary()" class="lesson-btn" style="margin-top: 1rem;">Create Liberation Itinerary</button>
                        
                        <div id="itineraryOutput" style="margin-top: 2rem; padding: 1rem; background: #f8f9fa; border-radius: 10px; display: none;">
                            <h4>Your Liberation Journey:</h4>
                            <div id="itineraryContent"></div>
                            <button onclick="saveItinerary()" class="tool-btn" style="margin-top: 1rem;">Save Itinerary</button>
                        </div>
                    </div>
                `
            },
            es: {
                title: "üìÖ Planificador de Viaje de Liberaci√≥n",
                content: `
                    <h3>Dise√±a Tu Itinerario del Para√≠so</h3>
                    <p>Construye el viaje colombiano perfecto que transformar√° tu vida para siempre.</p>
                    
                    <div class="tool-interface">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                            <div>
                                <label>Fecha de Inicio:</label>
                                <input type="date" id="startDate" style="width: 100%; padding: 0.5rem; border: 2px solid #ddd; border-radius: 5px;">
                            </div>
                            <div>
                                <label>Duraci√≥n:</label>
                                <select id="duration" style="width: 100%; padding: 0.5rem; border: 2px solid #ddd; border-radius: 5px;">
                                    <option value="7">7 d√≠as</option>
                                    <option value="10">10 d√≠as</option>
                                    <option value="14">14 d√≠as</option>
                                    <option value="21">21 d√≠as</option>
                                    <option value="30">30 d√≠as</option>
                                </select>
                            </div>
                        </div>
                        
                        <label>Destinos (selecciona m√∫ltiples):</label>
                        <div style="margin: 0.5rem 0;">
                            <input type="checkbox" id="cartagena" value="Cartagena"> <label for="cartagena">Cartagena</label><br>
                            <input type="checkbox" id="medellin" value="Medell√≠n"> <label for="medellin">Medell√≠n</label><br>
                            <input type="checkbox" id="bogota" value="Bogot√°"> <label for="bogota">Bogot√°</label><br>
                            <input type="checkbox" id="santaMarta" value="Santa Marta"> <label for="santaMarta">Santa Marta</label><br>
                            <input type="checkbox" id="coffeeRegion" value="Eje Cafetero"> <label for="coffeeRegion">Eje Cafetero</label>
                        </div>
                        
                        <label>Estilo de Viaje:</label>
                        <select id="travelStyle" style="width: 100%; padding: 0.5rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 5px;">
                            <option value="budget">Aventurero Econ√≥mico</option>
                            <option value="comfort">Buscador de Confort</option>
                            <option value="luxury">Explorador de Lujo</option>
                        </select>
                        
                        <button onclick="generateItinerary()" class="lesson-btn" style="margin-top: 1rem;">Crear Itinerario de Liberaci√≥n</button>
                        
                        <div id="itineraryOutput" style="margin-top: 2rem; padding: 1rem; background: #f8f9fa; border-radius: 10px; display: none;">
                            <h4>Tu Viaje de Liberaci√≥n:</h4>
                            <div id="itineraryContent"></div>
                            <button onclick="saveItinerary()" class="tool-btn" style="margin-top: 1rem;">Guardar Itinerario</button>
                        </div>
                    </div>
                `
            }
        },
        budget: {
            en: {
                title: "üí∞ Liberation Budget Calculator",
                content: `
                    <h3>Plan Your Financial Freedom Journey</h3>
                    <p>Calculate the investment required for your Colombian liberation experience.</p>
                    
                    <div class="tool-interface">
                        <label>Travel Duration (days):</label>
                        <input type="number" id="budgetDays" min="7" max="90" value="14" style="width: 100%; padding: 0.5rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 5px;">
                        
                        <label>Travel Style:</label>
                        <select id="budgetStyle" style="width: 100%; padding: 0.5rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 5px;">
                            <option value="budget">Budget Adventurer ($40-60/day)</option>
                            <option value="comfort">Comfort Seeker ($80-120/day)</option>
                            <option value="luxury">Luxury Explorer ($150-300+/day)</option>
                        </select>
                        
                        <label>Number of Travelers:</label>
                        <input type="number" id="travelerCount" min="1" max="10" value="2" style="width: 100%; padding: 0.5rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 5px;">
                        
                        <label>Include International Flights?</label>
                        <select id="includeFlights" style="width: 100%; padding: 0.5rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 5px;">
                            <option value="yes">Yes (estimate $400-800 roundtrip)</option>
                            <option value="no">No (I have flights)</option>
                        </select>
                        
                        <button onclick="calculateBudget()" class="lesson-btn" style="margin-top: 1rem;">Calculate Liberation Budget</button>
                        
                        <div id="budgetOutput" style="margin-top: 2rem; padding: 1rem; background: #f8f9fa; border-radius: 10px; display: none;">
                            <h4>Your Liberation Investment:</h4>
                            <div id="budgetContent"></div>
                            <div style="margin-top: 1rem; padding: 1rem; background: var(--primary); border-radius: 5px;">
                                <strong>Remember:</strong> This investment buys freedom, transformation, and memories that last eternity!
                            </div>
                        </div>
                    </div>
                `
            },
            es: {
                title: "üí∞ Calculadora de Presupuesto de Liberaci√≥n",
                content: `
                    <h3>Planifica Tu Viaje de Libertad Financiera</h3>
                    <p>Calcula la inversi√≥n requerida para tu experiencia de liberaci√≥n colombiana.</p>
                    
                    <div class="tool-interface">
                        <label>Duraci√≥n del Viaje (d√≠as):</label>
                        <input type="number" id="budgetDays" min="7" max="90" value="14" style="width: 100%; padding: 0.5rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 5px;">
                        
                        <label>Estilo de Viaje:</label>
                        <select id="budgetStyle" style="width: 100%; padding: 0.5rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 5px;">
                            <option value="budget">Aventurero Econ√≥mico ($40-60/d√≠a)</option>
                            <option value="comfort">Buscador de Confort ($80-120/d√≠a)</option>
                            <option value="luxury">Explorador de Lujo ($150-300+/d√≠a)</option>
                        </select>
                        
                        <label>N√∫mero de Viajeros:</label>
                        <input type="number" id="travelerCount" min="1" max="10" value="2" style="width: 100%; padding: 0.5rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 5px;">
                        
                        <label>¬øIncluir Vuelos Internacionales?</label>
                        <select id="includeFlights" style="width: 100%; padding: 0.5rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 5px;">
                            <option value="yes">S√≠ (estimado $400-800 ida y vuelta)</option>
                            <option value="no">No (ya tengo vuelos)</option>
                        </select>
                        
                        <button onclick="calculateBudget()" class="lesson-btn" style="margin-top: 1rem;">Calcular Presupuesto de Liberaci√≥n</button>
                        
                        <div id="budgetOutput" style="margin-top: 2rem; padding: 1rem; background: #f8f9fa; border-radius: 10px; display: none;">
                            <h4>Tu Inversi√≥n de Liberaci√≥n:</h4>
                            <div id="budgetContent"></div>
                            <div style="margin-top: 1rem; padding: 1rem; background: var(--primary); border-radius: 5px;">
                                <strong>Recuerda:</strong> ¬°Esta inversi√≥n compra libertad, transformaci√≥n y recuerdos que duran eternidad!
                            </div>
                        </div>
                    </div>
                `
            }
        }
    };

    // Detect current language
    const currentLang = document.documentElement.lang === 'es' ? 'es' : 'en';
    const content = toolContent[toolType][currentLang];

    modalBody.innerHTML = `
        <h2>${content.title}</h2>
        ${content.content}
    `;
    modal.style.display = 'block';
}

// Tool Implementation Functions
function generateLetter() {
    const name = document.getElementById('recipientName').value || 'Friend';
    const relationship = document.getElementById('relationship').value;
    const dates = document.getElementById('travelDates').value || 'this coming season';
    
    const relationships = {
        friend: ['my dear friend', 'mi querido/a amigo/a'],
        family: ['my beloved family member', 'mi querido familiar'],
        colleague: ['my respected colleague', 'mi respetado/a colega']
    };
    
    const currentLang = document.documentElement.lang === 'es' ? 'es' : 'en';
    const relText = relationships[relationship][currentLang === 'en' ? 0 : 1];
    
    const letterTemplates = {
        en: `
            <p>Dear ${name},</p>
            
            <p>I'm writing to you as ${relText} with incredible news! I've discovered paradise on Earth, and I want to invite you to experience it with me.</p>
            
            <p>I'm planning a liberation journey to Colombia ${dates}, and I can't imagine this life-changing experience without you. This isn't just a vacation - it's a transformation of soul, spirit, and perspective.</p>
            
            <p>Colombia offers everything we've been searching for:</p>
            <ul>
                <li>üèîÔ∏è Breathtaking landscapes from Caribbean beaches to Andean mountains</li>
                <li>üá®üá¥ The warmest, most welcoming culture we'll ever experience</li>
                <li>üíÉ Music, dance, and joy that awaken the soul</li>
                <li>üçç Food that tells stories of generations</li>
                <li>üïäÔ∏è Freedom from the routine that's been holding us back</li>
            </ul>
            
            <p>I've been preparing using the Colombia Travel Assistant tool from TripsToColombia.com, and I'm confident this will be the most meaningful journey of our lives.</p>
            
            <p>Please say you'll join me! Visit <strong>TripsToColombia.com</strong> to see what awaits us.</p>
            
            <p>With hope and excitement,<br>
            Your fellow traveler to paradise</p>
        `,
        es: `
            <p>Querido/a ${name},</p>
            
            <p>Te escribo como ${relText} con noticias incre√≠bles! He descubierto el para√≠so en la Tierra, y quiero invitarte a experimentarlo conmigo.</p>
            
            <p>Estoy planeando un viaje de liberaci√≥n a Colombia ${dates}, y no puedo imaginar esta experiencia que cambia la vida sin ti. Esto no es solo unas vacaciones - es una transformaci√≥n de alma, esp√≠ritu y perspectiva.</p>
            
            <p>Colombia ofrece todo lo que hemos estado buscando:</p>
            <ul>
                <li>üèîÔ∏è Paisajes impresionantes desde playas caribe√±as hasta monta√±as andinas</li>
                <li>üá®üá¥ La cultura m√°s c√°lida y acogedora que jam√°s experimentaremos</li>
                <li>üíÉ M√∫sica, baile y alegr√≠a que despiertan el alma</li>
                <li>üçç Comida que cuenta historias de generaciones</li>
                <li>üïäÔ∏è Libertad de la rutina que nos ha estado reteniendo</li>
            </ul>
            
            <p>He estado prepar√°ndome usando la herramienta Asistente de Viajes Colombia de TripsToColombia.com, y conf√≠o en que este ser√° el viaje m√°s significativo de nuestras vidas.</p>
            
            <p>¬°Por favor dime que me acompa√±ar√°s! Visita <strong>TripsToColombia.com</strong> para ver lo que nos espera.</p>
            
            <p>Con esperanza y emoci√≥n,<br>
            Tu compa√±ero/a de viaje al para√≠so</p>
        `
    };
    
    document.getElementById('letterContent').innerHTML = letterTemplates[currentLang];
    document.getElementById('letterOutput').style.display = 'block';
}

function copyToClipboard() {
    const text = document.getElementById('letterContent').innerText;
    navigator.clipboard.writeText(text).then(() => {
        alert('Letter copied to clipboard! Ready to liberate souls!');
    });
}

function generateItinerary() {
    const startDate = document.getElementById('startDate').value;
    const duration = parseInt(document.getElementById('duration').value);
    const travelStyle = document.getElementById('travelStyle').value;
    
    // Get selected destinations
    const destinations = [];
    if (document.getElementById('cartagena').checked) destinations.push('Cartagena');
    if (document.getElementById('medellin').checked) destinations.push('Medell√≠n');
    if (document.getElementById('bogota').checked) destinations.push('Bogot√°');
    if (document.getElementById('santaMarta').checked) destinations.push('Santa Marta');
    if (document.getElementById('coffeeRegion').checked) destinations.push('Coffee Region');
    
    if (destinations.length === 0) {
        alert('Please select at least one destination for your liberation journey!');
        return;
    }
    
    const currentLang = document.documentElement.lang === 'es' ? 'es' : 'en';
    
    const styleNames = {
        en: { budget: "Budget Adventurer", comfort: "Comfort Seeker", luxury: "Luxury Explorer" },
        es: { budget: "Aventurero Econ√≥mico", comfort: "Buscador de Confort", luxury: "Explorador de Lujo" }
    };
    
    let itinerary = `
        <h4>${currentLang === 'en' ? 'Your Liberation Journey' : 'Tu Viaje de Liberaci√≥n'}</h4>
        <p><strong>${currentLang === 'en' ? 'Style' : 'Estilo'}:</strong> ${styleNames[currentLang][travelStyle]}</p>
        <p><strong>${currentLang === 'en' ? 'Duration' : 'Duraci√≥n'}:</strong> ${duration} ${currentLang === 'en' ? 'days' : 'd√≠as'}</p>
        <p><strong>${currentLang === 'en' ? 'Destinations' : 'Destinos'}:</strong> ${destinations.join(', ')}</p>
        
        <div style="margin-top: 1rem; padding: 1rem; background: white; border-radius: 5px;">
            <h5>${currentLang === 'en' ? 'Recommended Liberation Path:' : 'Ruta de Liberaci√≥n Recomendada:'}</h5>
            <p>${getItineraryAdvice(destinations, duration, currentLang)}</p>
        </div>
        
        <div style="margin-top: 1rem; padding: 1rem; background: var(--primary); border-radius: 5px;">
            <strong>${currentLang === 'en' ? 'Next Step:' : 'Pr√≥ximo Paso:'}</strong> 
            ${currentLang === 'en' 
                ? 'Visit TripsToColombia.com to book this life-changing journey!' 
                : '¬°Visita TripsToColombia.com para reservar este viaje que cambiar√° tu vida!'}
        </div>
    `;
    
    document.getElementById('itineraryContent').innerHTML = itinerary;
    document.getElementById('itineraryOutput').style.display = 'block';
}

function getItineraryAdvice(destinations, duration, lang) {
    if (lang === 'en') {
        if (destinations.includes('Cartagena') && destinations.includes('Medell√≠n')) {
            return "Start in Cartagena for Caribbean warmth, then fly to Medell√≠n for mountain beauty. Perfect balance of coast and culture!";
        } else if (destinations.includes('Santa Marta') && destinations.includes('Coffee Region')) {
            return "Beach relaxation in Santa Marta followed by coffee region tranquility. Nature's perfect combination!";
        } else {
            return "Each destination offers unique liberation experiences. Follow your heart to discover Colombia's magic!";
        }
    } else {
        if (destinations.includes('Cartagena') && destinations.includes('Medell√≠n')) {
            return "Comienza en Cartagena para la calidez caribe√±a, luego vuela a Medell√≠n para la belleza monta√±osa. ¬°Balance perfecto de costa y cultura!";
        } else if (destinations.includes('Santa Marta') && destinations.includes('Coffee Region')) {
            return "Relajaci√≥n playera en Santa Marta seguida por la tranquilidad del eje cafetero. ¬°Combinaci√≥n perfecta de la naturaleza!";
        } else {
            return "Cada destino ofrece experiencias de liberaci√≥n √∫nicas. ¬°Sigue tu coraz√≥n para descubrir la magia de Colombia!";
        }
    }
}

function calculateBudget() {
    const days = parseInt(document.getElementById('budgetDays').value);
    const style = document.getElementById('budgetStyle').value;
    const travelers = parseInt(document.getElementById('travelerCount').value);
    const includeFlights = document.getElementById('includeFlights').value;
    
    const dailyRates = {
        budget: 50,
        comfort: 100, 
        luxury: 225
    };
    
    const flightCost = includeFlights === 'yes' ? 600 : 0;
    const dailyCost = dailyRates[style];
    const total = (dailyCost * days * travelers) + (flightCost * travelers);
    
    const currentLang = document.documentElement.lang === 'es' ? 'es' : 'en';
    
    const budgetHTML = {
        en: `
            <div style="font-size: 1.2rem; margin-bottom: 1rem;">
                <strong>Total Investment: $${total.toLocaleString()}</strong>
            </div>
            <div style="background: white; padding: 1rem; border-radius: 5px;">
                <p><strong>Breakdown:</strong></p>
                <ul>
                    <li>Accommodation & Food: $${(dailyCost * 0.6 * days * travelers).toLocaleString()}</li>
                    <li>Activities & Transportation: $${(dailyCost * 0.3 * days * travelers).toLocaleString()}</li>
                    <li>Travel Insurance & Misc: $${(dailyCost * 0.1 * days * travelers).toLocaleString()}</li>
                    ${includeFlights === 'yes' ? `<li>International Flights: $${(flightCost * travelers).toLocaleString()}</li>` : ''}
                </ul>
            </div>
            <p style="margin-top: 1rem; color: var(--success); font-weight: bold;">
                This investment buys freedom that lasts a lifetime!
            </p>
        `,
        es: `
            <div style="font-size: 1.2rem; margin-bottom: 1rem;">
                <strong>Inversi√≥n Total: $${total.toLocaleString()}</strong>
            </div>
            <div style="background: white; padding: 1rem; border-radius: 5px;">
                <p><strong>Desglose:</strong></p>
                <ul>
                    <li>Alojamiento & Comida: $${(dailyCost * 0.6 * days * travelers).toLocaleString()}</li>
                    <li>Actividades & Transporte: $${(dailyCost * 0.3 * days * travelers).toLocaleString()}</li>
                    <li>Seguro de Viaje & Varios: $${(dailyCost * 0.1 * days * travelers).toLocaleString()}</li>
                    ${includeFlights === 'yes' ? `<li>Vuelos Internacionales: $${(flightCost * travelers).toLocaleString()}</li>` : ''}
                </ul>
            </div>
            <p style="margin-top: 1rem; color: var(--success); font-weight: bold;">
                ¬°Esta inversi√≥n compra libertad que dura toda la vida!
            </p>
        `
    };
    
    document.getElementById('budgetContent').innerHTML = budgetHTML[currentLang];
    document.getElementById('budgetOutput').style.display = 'block';
}

// Core Application Functions
function scrollToLessons() {
    document.getElementById('lessons').scrollIntoView({ 
        behavior: 'smooth' 
    });
}

function openLesson(lessonNumber) {
    const modal = document.getElementById('lessonModal');
    const modalBody = document.getElementById('modalBody');
    const currentLang = document.documentElement.lang === 'es' ? 'es' : 'en';
    
    const lesson = lessonContent[currentLang][lessonNumber];
    modalBody.innerHTML = `
        <h2>${lesson.title}</h2>
        ${lesson.content}
    `;
    
    modal.style.display = 'block';
}

function closeModal() {
    document.getElementById('lessonModal').style.display = 'none';
}

// Close modal when clicking outside
window.onclick = function(event) {
    const modal = document.getElementById('lessonModal');
    if (event.target === modal) {
        closeModal();
    }
}

// Initialize application
document.addEventListener('DOMContentLoaded', function() {
    console.log('üá®üá¥ Colombia Travel Assistant - Liberation Tool Activated!');
    console.log('Mission: Guide souls to Colombian paradise through education and tools');
});